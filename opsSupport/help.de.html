<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Pattern Scripts Help</title>
<meta charset="utf-8">
<meta name="AUTHOR" content="Greg Ritacco">
<meta name="PROJECT" content="Pattern scripts for JMRI">
<meta name="VERSION" content="2.0.0">
<style>
  html * {
    font-family: verdana;
  }
  h1 {
    margin-left: 10px;
  }
  h2 {
    margin-left: 10px;
  }
  h3 {
    margin-left: 20px;
  }
  h4 {
    margin-left: 30px;
  }
  p {
    margin-left: 30px;
  }
  img {
    margin-left: 30px;
  }
  pre {
    margin-left: 30px;
  }
</style>
</head>

<body>

<h1>Hilfe Seite - Pattern Scripts Plugin für JMRI</h1>
<p>Das Plugin Pattern Scripts für JMRI ist eine Reihe von Unterprogrammen für JMRI Operations Pro. Die Verwendung dieses Plugins ist in der folgenden Liste von Videos dokumentiert.</p>
<h3>Video-Dokumentation</h3>
<p>Diese Videos sind in englischer Sprache aufgenommen.</p>
<p><A HREF="https://youtu.be/Sl9yBQaRpeY">Wie man dieses Plugin zu JMRI hinzufügt</A></p>
<p><A HREF="https://youtu.be/6G7xkRJTczo">Wie man dieses Plugin übersetzt</A></p>
<p><A HREF="https://youtu.be/GjPtXk3oKmc">So richten Sie dieses Plugin ein</A></p>
<p><A HREF="https://youtu.be/DK6O9AQmqXo">Wie man dieses Plugin verändert</A></p>
<p><A HREF="https://youtu.be/IdXvxyo-E3Y">Track Pattern Subroutine - Demonstration auf einer Werft</A></p>
<p><A HREF="https://youtu.be/2Tv6sUMDD_Y">Track Pattern Subroutine - Demonstration in der Industrie</A></p>
<p><A HREF="https://youtu.be/rlUfoSesnQo">o2o, die Unterroutine ops to ops für TrainPlayer©</A></p>

<h2>j Plus Unterroutine</h2>
<h3>Einführung</h3>
<p>The j Plus subroutine adds enhanced railroad detail to reports generated by both JMRI and this plugin.
Data for this subroutine is entered into the text boxes or if the TrainPlayer subroutine is activated, the additional railroad detail is imported from the TrainPlayer layout.
The enhanced fields are as follows:
<br>Operating Railroad Name - This is railroad that owns or operates the tracks being modeled. Any name can be entered such as 'PRR' or 'BN UPRR Joint' or 'G&D'.
<br>Operational Territory - This is the railroad's name for the part being modeled, such as 'Long Beach Intermodal Terminal' or 'Salem Glass Works Branch'.
<br>Location - Where the the railroad is located, such as 'Oakland, CA' or 'The Bronx, New York'.
<br>Year Modeled - Which year the model railroad is based on, this is a mirror of 'JMRI/OperationsPro/Settings/Year Modeled'.</p>

<h2>Track Pattern Subroutine</h2>
<h3>Einführung</h3>
<p>Das Unterprogramm "Track Pattern" kann Pattern-Berichte für Tracks an einem einzigen Ort erstellen.
Außerdem können die Fahrzeuge innerhalb eines Ortes von einem Gleis zum anderen bewegt werden,
  and optionally, if a car is moved onto a spur, the schedule for that spur can be applied.</p>

<h3>Organisation</h3>
<p>Die folgende Tabelle zeigt die Codestruktur dieses Plugins.</P>
<img src="FlowChart1.png" alt="<Flow Chart Image>">

<h3>Plugin-Layout</h3>
<p>OperationsPatternScripts.MainScript.View.makePatternScriptsWindow()</p>
<img src="PluginLayout1.png" alt="<Plugin Layout Image>">

<h3>Muster-Skripte Unterroutine</h3>
<p>OperationsPatternScripts.PatternTracksSubroutine.Controller.makeSubroutinePanel()</p>
<img src="PatternScriptsSubroutine1.png" alt="<Pattern Scripts Window Image>">

<h3>Musterbericht für Trackfenster</h3>
<p>OperationsPatternScripts.ControllerSetCarsForm.CreatePatternReportGui.makeFrame()</p>
<img src="PatternReportForTrackWindow1.png" alt="<Pattern Report for Track Window Image>">

<h3>Track Pattern and Switch List JSON format</h3>
<p>Die Musterberichte und TrainPlayer©-Exporte beginnen alle mit der Erstellung einer JSON-Datei.
Die Datei wird von diesem Plugin erstellt und im Falle von TrainPlayer©-Manifestexporten wird das JSON durch Modifizierung des von JMRI generierten Manifest-JSON erstellt.
Alle JSON-Dateien werden in den Ordner jsonManifests geschrieben und folgen dem abgebildeten Format:</p>
<img src="ReportFileFormat1.png" alt="<JSON format for reports>">

<h3>Schlüssel – PatternConfig.json</h3>
<p>Jedes JMRI-Profil erhält seine eigene Konfigurationsdatei mit dem Namen PatternConfig.json.
Es befindet sich im Ordner "Operationen" und wird verwendet, um benutzerdefinierte Einstellungen für jedes Profil vorzunehmen und Benutzereingaben aufzuzeichnen.
<br><font color="blue">Die Beschreibung der einzelnen Elemente ist blau.</font>
<br><font color="green">Vom Benutzer bearbeitbare Tasten sind in grüner Farbe beschrieben.</font>
<br>Um die grün markierten Werte wurde eine Art Schutzleiste gelegt, aber auch so kann dieses Plugin nicht jeden Fehler abfangen.
In einigen Fällen kann das Plugin abstürzen. Wenn das passiert, drücken Sie die Schaltfläche 'Restart from PatternConfig Backup' und das Plugin wird die letzte gute PatternConfig.json-Datei als neuen Startpunkt verwenden.
In anderen Fällen, wenn ein Fehler bei der Bearbeitung der Datei PatternConfig.json gemacht wird, ersetzt das Plugin diese durch die Standarddatei, und der Benutzer muss von vorne beginnen.
<br>Im schlimmsten Fall löschen Sie einfach die Datei "Pattern Config.json" und das Plugin erstellt eine neue Datei.</p>

<h4><font color="green">Farbdefinitionen</font></h4>
<pre>
  "CD": {
    "CP": { <font color="blue">Farbpalette</font>
      "<font color="green">BLANCH</font>": { <font color="blue">Jede dieser Farben kann geändert werden</font>
        "A": <font color="green">255</font>, <font color="blue">Alpha-Wert</font>
        "B": <font color="green">225</font>, <font color="blue">Blauer Wert</font>
        "D": <font color="green">Light grey</font>, <font color="blue">Vage Beschreibung</font>
        "G": <font color="green">225</font>, <font color="blue">Grüner Wert</font>
        "R": <font color="green">225</font> <font color="blue">Roter Wert</font>
      },
      "DUST": {
        "A": 255,
        "B": 218,
        "D": "Light tan",
        "G": 242,
        "R": 252
      },
      "FADED": {
        "A": 255,
        "B": 245,
        "D": "Light purple",
        "G": 225,
        "R": 237
      },
      "LICHEN": {
        "A": 255,
        "B": 244,
        "D": "Light green",
        "G": 255,
        "R": 236
      },
      "PALE": {
        "A": 255,
        "B": 250,
        "D": "Light blue",
        "G": 243,
        "R": 237
      },
      "PETAL": {
        "A": 255,
        "B": 224,
        "D": "Light red",
        "G": 208,
        "R": 240
      }
    },
    "locoColor": <font color="green">"FADED"</font>, "" specifies no color will be used</font>
    "carColor": <font color="green">"DUST"</font>,
    "alertColor": <font color="green">"PETAL"</font>
  },
</pre>
<h4><font color="blue">Steuertafel</font></h4>
<pre>
  "CP" : {
    "TS" : { Translation Services
      "UD" : "useDeepL",
      "UX" : "Some Other Translation Service"
    },
    "TC" : "UD", <font color="blue">Übersetzungsauswahl</font>
    "BT" : ["Plugin", "Help"], <font color="blue">Bundle-Ziele, Basisname für jedes Bundle</font>
    "AP" : true, <font color="blue">Schaltfläche "Hinzufügen" zum Panel Pro-Rahmen, Plugin wird nicht angezeigt, ist aber dennoch aktiviert</font>
    "SE" : "utf-8", <font color="blue">Standardkodierung</font>
    "SI": [ <font color="blue">Skript Enthält</font>
      {
        "PatternTracksSubroutine": true <font color="green">Fügen Sie dieses Unterprogramm in die Systemsteuerung ein</font>
      },
      {
        "o2oSubroutine": false <font color="green">Fügen Sie dieses Unterprogramm in die Systemsteuerung ein</font>
      }
    ],
    "PH" : 220, <font color="blue">Standard-Panelhöhe</font>
    "PW" : 1500, <font color="blue">Standard-Panelbreite</font>
    "PX" : 0, <font color="blue">Plugin X location</font>
    "PY" : 0, <font color="blue">Plugin Y location</font>
    "OC" : true, <font color="green">Systemkonsolenfenster öffnen</font>
    "RV" : 20220205 <font color="blue">Revisionskontrolle</font>
  },
</pre>
<h4><font color="blue">Pattern Tracks</font></h4>
<pre>
  <font color="blue">Diese nicht bearbeiten</font>
  "PT" : {
    "AD" : [ <font color="blue">All Divisions (written by this plugin)</font>
    ],
    "AL" : [ <font color="blue">Alle Standorte (von diesem Plugin geschrieben)</font>
    ],
    "PL" : "", <font color="blue">Pattern Location (von diesem Plugin geschrieben)</font>
    "PT" : { <font color="blue">Pattern-Tracks (geschrieben von diesem Plugin)</font>
    },
    "PA" : false, <font color="blue">Flagge "Nur Yard Tracks" (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "PI" : false, <font color="blue">Track Length Flag ignorieren (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "AS" : true, <font color="blue">Flag "Zeitplan" anwenden (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "TI" : false, <font color="blue">TrainPlayer Include flag (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "PW" : 260, <font color="blue">Musterbreite</font>
    "PH" : 16, <font color="blue">Musterhöhe</font>
    "RM": 8, <font color="blue">Reihenmultiplikator</font>
</pre>
<h4><font color="green">Modifikatoren für Berichte</font></h4>
<pre>
  "RM" : {
    "DS" : "<font color="green">*No Waybill</font>", <font color="blue">Bestimmungskennzeichen</font>
    "DT" : "<font color="green">*Not Consigned</font>", <font color="blue">Ziel Gleisbezeichner</font>
    "FD" : "<font color="green">*Via Staging</font>", <font color="blue">Endzielbezeichnung</font>
    "FT" : "<font color="green">*Any Line</font>", <font color="blue">Endziel Gleisbezeichner</font>
    "SL": [ <font color="blue">Lokomotiven sortieren</font>
      "<font color="green">Model</font>"
    ],
    "SC": [ <font color="blue">Autos sortieren</font>
      "<font color="green">Load Type</font>",
      "<font color="green">FD&Track</font>"
    ],
    "AW": { <font color="blue">Attribut Breite</font>
      "Input": <font color="green">6</font>,
      "Model": <font color="green">5</font>,
      "Road" : <font color="green">5</font>,
      "Number" : <font color="green">7</font>,
      "Type" : <font color="green">6</font>,
      "Length" : <font color="green">7</font>,
      "Weight" : <font color="green">7</font>,
      "Load" : <font color="green">6</font>,
      "Load Type" : <font color="green">5</font>,
      "Loco Type" : <font color="green">18</font>,
      "Owner" : <font color="green">20</font>,
      "Consist" : <font color="green">8</font>,
      "Hazardous" : <font color="green">10</font>,
      "Color" : <font color="green">6</font>,
      "Kernel" : <font color="green">7</font>,
      "Kernel Size" : <font color="green">12</font>,
      "Owner" : <font color="green">6</font>,
      "Track" : <font color="green">6</font>,
      "Location" : <font color="green">9</font>,
      "Destination" : <font color="green">15</font>,
      "Dest&Track" : <font color="green">30</font>,
      "Final Dest" : <font color="green">11</font>,
      "FD&Track" : <font color="green">21</font>,
      "Comment" : <font color="green">15</font>,
      "SetOut Msg" : <font color="green">12</font>,
      "PickUp Msg" : <font color="green">12</font>,
      "RWE" : <font color="green">10</font>,
      " " : 0
    }
  },
</pre>
<h2>o2o Unterprogramm, ops 2 ops</h2>
<h3>Einführung</h3>
<p>Die Unterroutine ops to ops (o2o) ist eine Gruppe von Hilfsprogrammen, die JMRI Operations Pro als Operations-Engine für TrainPlayer© dienen.
Die Idee ist, die Möglichkeiten der TrainPlayer©-Funktion Advanced Ops um die betriebliche Flexibilität von Operations Pro zu erweitern,
und gleichzeitig die mühsame Synchronisierung von zwei Datenbanken zu vermeiden.</p>
<h4><font color="green">o2o Subroutine Settings</font></h4>
<pre>
  "RD" :{  <font color="blue">Railroad Details, optional part of the TrainPlayer layout.</font>
    "RR" : "", <font color="blue">Parent railroad, the one that owns the tracks.</font>
    "OP" : "", <font color="blue">Name of the particular operation being modeled.</font>
    "LO" : "", <font color="blue">Location of the prototype.</font>
    "YR" : "", <font color="blue">Calendar year being modeled.</font>
    "DV" : [], <font color="blue">List of railroad divisions for this layout, comma seperated.</font>
    "SC" : "" <font color="blue">Model railroad scale.</font>
  },
  "o2o" : {
    "PC": [  <font color="blue">Liste der TrainPlayer-Wagencodes für Personenwagen.</font>
      "B",
      "BE",
      "BH",
      "BM",
      "BMR",
      "BMT",
      "BP",
      "BR",
      "BX",
      "CA",
      "CS",
      "D",
      "DA",
      "DB",
      "DC",
      "DL",
      "DO",
      "DP",
      "DPA",
      "MA",
      "MB",
      "MR",
      "P",
      "PA",
      "PAS",
      "PB",
      "PBC",
      "PBO",
      "PC",
      "PL",
      "PO",
      "PS",
      "PSA"
    ],
    "CC" : [  <font color="blue">Liste der TrainPlayer-Wagencodes.</font>
      "N",
      "NM",
      "NE"
    ],
    "CFL" : [  <font color="blue">Core File List</font>
      "OperationsCarRoster",
      "OperationsEngineRoster",
      "OperationsLocationRoster"
    ],
    "SR" : {  <font color="blue">Scale Rubric</font> JMRI Modelleisenbahn Maßstab.
      "Z" : 1,
      "N" : 2,
      "TT" : 3,
      "HOn3" : 4,
      "OO" : 5,
      "HO" : 6,
      "Sn3" : 7,
      "S" : 8,
      "On3" : 9,
      "O" : 10,
      "G" : 11
    },
    "RF" : { <font color="blue">Report Files</font> Namen der TrainPlayer-Layout-Exportdateien.
      "TRL" : <font color="blue">"TrainPlayer Report - Locations.txt"</font>,
      "TRI" : <font color="blue">"TrainPlayer Report - Industries.txt"</font>,
      "TRR" : <font color="blue">"TrainPlayer Report - Rolling Stock.txt"</font>
    },
    "TO" : { <font color="blue">Tweek Operations</font> Anpassungen der Betriebseinstellungen.
      "SME" : <font color="green">true</font>,  setMainMenuEnabled
      "CWS" : <font color="green">true</font>,  setCloseWindowOnSaveEnabled
      "SBA" : <font color="green">true</font>,  setBuildAggressive
      "SIA" : <font color="green">true</font>,  setStagingTrackImmediatelyAvail
      "SCT" : <font color="green">"ARR Codes"</font>,  setCarTypes
      "TNB" : <font color="green">true</font>,  setStagingTryNormalBuildEnabled
      "SME" : <font color="green">true</font>,  setManifestEditorEnabled
      "PUC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setPickupManifestMessageFormat
      "SOC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setDropManifestMessageFormat
      "MC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Final Dest"</font>,  setLocalManifestMessageFormat
      "PUL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setPickupEngineMessageFormat
      "SOL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setDropEngineMessageFormat
      },
    "SM" : {
      "SCL" : <font color="green">true</font>,  setAddCustomLoadsAnySpurEnabled
      "RCL" : <font color="green">true</font>,  setRemoveCustomLoadsEnabled
      "LEE" : <font color="green">true</font>,  setLoadEmptyEnabled
    },
    "TR" : {  <font color="blue">Type Rubric</font> TrainPlayer- und JMRI-Gleisarten angleichen.
      "industry": "Spur",
      "interchange": "Interchange",
      "staging": "Staging",
      "class yard": "Yard",
      "XO reserved": "Spur"
    }

</pre>
</body>

</html>
