<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Pattern Scripts Help</title>
<meta charset="utf-8">
<meta name="AUTHOR" content="Greg Ritacco">
<meta name="PROJECT" content="Pattern scripts for JMRI">
<meta name="VERSION" content="2.0.0">
<style>
  html * {
    font-family: verdana;
  }
  h1 {
    margin-left: 10px;
  }
  h2 {
    margin-left: 10px;
  }
  h3 {
    margin-left: 20px;
  }
  h4 {
    margin-left: 30px;
  }
  p {
    margin-left: 30px;
  }
  img {
    margin-left: 30px;
  }
  pre {
    margin-left: 30px;
  }
</style>
</head>

<body>

<h1>Hilfe Seite - Pattern Scripts Plugin für JMRI</h1>
<p>Das Plugin "Pattern Scripts" für JMRI ist eine Sammlung von Unterprogrammen für JMRI Operations Pro.
Die Verwendung dieses Plugins ist in der folgenden Liste von Videos dokumentiert.
The videos are recorded in the English language.</p>

<h3>Pattern Scripts-Plugin - Video-Dokumentation</h3>

<p>Übersicht über dieses Plugin</p>
<p><A HREF="https://youtu.be/Sl9yBQaRpeY">Wie man dieses Plugin zu JMRI hinzufügt</A></p>
<p><A HREF="https://youtu.be/6G7xkRJTczo">Wie man dieses Plugin übersetzt</A></p>
<p><A HREF="https://youtu.be/GjPtXk3oKmc">So richten Sie dieses Plugin ein</A></p>
<p><A HREF="https://youtu.be/DK6O9AQmqXo">Wie man dieses Plugin ändert</A></p>
<h3>Unterprogramme - Video-Dokumentation</h3>
<p>Das Unterprogramm j Plus</A></p>
<p><A HREF="https://youtu.be/IdXvxyo-E3Y">Track Pattern Subroutine - Demonstration auf einer Werft</A></p>
<p><A HREF="https://youtu.be/2Tv6sUMDD_Y">Track Pattern Subroutine - Demonstration in der Industrie</A></p>
<p><A HREF="https://youtu.be/rlUfoSesnQo">o2o, die Unterroutine ops to ops für TrainPlayer©</A></p>

<h2>Plugin für Musterskripte</h2>
<h3>Einführung</h3>
<p>Das Plugin "Pattern Scripts" kann als Rahmen für die Aufnahme von Unterprogrammen für JMRI Operations Pro betrachtet werden, die eine Benutzeroberfläche benötigen.
Dieses Plugin verfügt über drei Unterprogramme: j Plus, Pattern Tracks und o2o.
Es ist auch eine Vorlage enthalten, die als Gerüst für jemanden dient, der sein eigenes Unterprogramm hinzufügen möchte.
Obwohl die Unterprogramme in gewisser Weise voneinander abhängig sind, können sie je nach Bedarf einzeln aktiviert oder deaktiviert werden.</p>

<h3>Organisation</h3>
<p>Die folgende Tabelle zeigt die Codestruktur dieses Plugins.</P>
<img src="Code_Structure.png" alt="<Code Structure Image>">

<h3>Plugin-Layout</h3>
<p>OperationsPatternScripts.MainScript.View.makePatternScriptsWindow()</p>
<img src="Plugin_Layout.png" alt="<Plugin Layout Image>">

<h3>PatternConfig.json</h3>
<p>Jedes JMRI-Profil erhält seine eigene Konfigurationsdatei mit dem Namen PatternConfig.json.
Es befindet sich im Ordner "Operationen" und wird verwendet, um benutzerdefinierte Einstellungen für jedes Profil vorzunehmen und Benutzereingaben aufzuzeichnen.
<br><font color="blue">Die Beschreibung der einzelnen Elemente ist blau.</font>
<br><font color="green">Vom Benutzer bearbeitbare Tasten sind in grün beschrieben.</font>
<br>Select Tools/Edit Config File.
If a mistake is made editing the PatternConfig.json file, the plugin will delete the file and provide a new one to start over with.
Worst case the plugin may crash. If </p>

<h4>Pattern Scripts Plugin-Einstellungen in PatternConfig.json</h4>
<pre>
  "CP" : { <font color="blue">Steuertafel</font>
    "TS" : { <font color="blue">Übersetzungsdienstleistungen</font>
      "UD" : "UseDeepL",
      "UX" : "UseSomethingElse"
    },
    "TC" : "UD", <font color="blue">Übersetzungsauswahl</font>
    "LN" : "", <font color="blue">Layout-Name aus JMRI-Einstellungen</font>
    "DR" : true, <font color="blue">Reserviert</font>
    "AP" : true, <font color="blue">Schaltfläche "Hinzufügen" zum Panel Pro-Rahmen, Plugin wird nicht angezeigt, ist aber dennoch aktiviert</font>
    "SE" : "utf-8", <font color="blue">Standardkodierung</font>
    "IL" : [ <font color="blue">Include-Liste, Unterprogramme werden in dieser Reihenfolge eingebunden</font>
      "jPlusSubroutine",
      "PatternTracksSubroutine",
      "o2oSubroutine"
    ],
    "jPlusSubroutine" : false, <font color="blue">Aktivierungsstatus</font>
    "PatternTracksSubroutine" : true, <font color="blue">Aktivierungsstatus</font>
    "o2oSubroutine" : false, <font color="blue">Aktivierungsstatus</font>
    "PH" : 280, <font color="blue">Standard-Panelhöhe</font>
    "PW" : 1100, <font color="blue">Standard-Panelbreite</font>
    "PX" : 0, <font color="blue">Standort des Plugins, X-Achse</font>
    "PY" : 0, <font color="blue">Standort des Plugins, Y-Achse</font>
    "OC" : true, <font color="green">Öffnen des Systemkonsolenfensters beim Starten des Plugins</font>
    "RV" : 20221122 <font color="blue">Revisionskontrolle</font>
  },
  "CD": { <font color="blue">Farbdefinitionen</font>
    "CP": { <font color="blue">Farbpalette</font>
      "<font color="green">BLANCH</font>": { <font color="blue">Jede dieser Farben kann geändert werden</font>
        "A": <font color="green">255</font>, <font color="blue">Alpha-Wert</font>
        "B": <font color="green">225</font>, <font color="blue">Blauer Wert</font>
        "D": <font color="green">Light grey</font>, <font color="blue">Vage Beschreibung</font>
        "G": <font color="green">225</font>, <font color="blue">Grüner Wert</font>
        "R": <font color="green">225</font> <font color="blue">Roter Wert</font>
      },
      "DUST": {
        "A": 255,
        "B": 218,
        "D": "Light tan",
        "G": 242,
        "R": 252
      },
      "FADED": {
        "A": 255,
        "B": 245,
        "D": "Light purple",
        "G": 225,
        "R": 237
      },
      "LICHEN": {
        "A": 255,
        "B": 244,
        "D": "Light green",
        "G": 255,
        "R": 236
      },
      "PALE": {
        "A": 255,
        "B": 250,
        "D": "Light blue",
        "G": 243,
        "R": 237
      },
      "PETAL": {
        "A": 255,
        "B": 224,
        "D": "Light red",
        "G": 208,
        "R": 240
      },
    "locoColor": <font color="green">"FADED"</font> Keine Farbe mit "" angeben
    "carColor": <font color="green">"DUST"</font>,
    "alertColor": <font color="green">"PETAL"</font>
  },
  "TO" : { <font color="blue">Wochenbetrieb, Anpassungen der Betriebseinstellungen</font>
    "SME" : <font color="green">true</font>,  setMainMenuEnabled
    "CWS" : <font color="green">true</font>,  setCloseWindowOnSaveEnabled
    "SBA" : <font color="green">true</font>,  setBuildAggressive
    "SIA" : <font color="green">true</font>,  setStagingTrackImmediatelyAvail
    "SCT" : <font color="green">"ARR Codes"</font>,  setCarTypes
    "TNB" : <font color="green">true</font>,  setStagingTryNormalBuildEnabled
    "SME" : <font color="green">true</font>,  setManifestEditorEnabled
    "PUC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setPickupManifestMessageFormat
    "SOC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setDropManifestMessageFormat
    "MC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Final Dest"</font>,  setLocalManifestMessageFormat
    "PUL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setPickupEngineMessageFormat
    "SOL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setDropEngineMessageFormat
    },
  "SM" : { <font color="blue">Staging modifiers</font>
    "SCL" : <font color="green">true</font>,  setAddCustomLoadsAnySpurEnabled
    "RCL" : <font color="green">true</font>,  setRemoveCustomLoadsEnabled
    "LEE" : <font color="green">true</font>,  setLoadEmptyEnabled
  },
</pre>

<h2>j Plus Unterroutine</h2>
<h3>Einführung</h3>
<p>Das Unterprogramm j Plus fügt den Berichten, die sowohl von JMRI als auch von diesem Plugin erstellt werden, erweiterte Eisenbahndetails hinzu.</P>
<p>Die Daten für dieses Unterprogramm werden in die Textfelder eingegeben, oder wenn das TrainPlayer-Unterprogramm aktiviert ist, werden die zusätzlichen Eisenbahndetails aus dem TrainPlayer-Layout importiert.</P>
<p>Es müssen nicht alle Felder ausgefüllt werden.</P>
<p>Die erweiterten Felder sind wie folgt:</P>
<h4>Betriebsbahnname</h4>
<p>Dies ist die Bahngesellschaft, die die zu modellierenden Gleise besitzt oder betreibt. Es kann ein beliebiger Name eingegeben werden, z. B. 'PRR' oder 'BN UPRR Joint' oder 'G&D'.</P>
<h4>Operatives Territorium</h4>
<p>Dies ist der Name der Bahngesellschaft für den zu modellierenden Teil, z. B. "Long Beach Intermodal Terminal" oder "Salem Glass Works Branch".</P>
<h4>Standort</h4>
<p>Der Ort, an dem sich die Bahnlinie befindet, z. B. "The Great Divide" oder "The Bronx, New York".</P>
<h4>Jahr des Modells</h4>
<p>Welches Jahr der Modelleisenbahn zugrunde liegt, ist eine Spiegelung von 'JMRI/OperationsPro/Einstellungen/Jahr modelliert'.</p>

<h3>Unterprogramm-Panel</h3>
<p>OperationsPatternScripts.jPlusSubroutine.Controller.makeSubroutinePanel()</p>
<img src="j_Plus_Subroutine.png" alt="<j Plus Subroutine Image>">

<h4>j Plus Unterroutine Settings in PatternConfig.json</h4>
<pre>
  "JP" :{  <font color="blue">j Plus Details.</font>
    "OR" : "", <font color="green">Betreibende Eisenbahn, die Eigentümerin der Gleise.</font>
    "TR" : "", <font color="green">Territorium: Name des jeweiligen Vorgangs, der modelliert wird.</font>
    "LO" : "", <font color="green">Standort des Prototyps.</font>
    "YR" : "", <font color="green">Kalenderjahr, das modelliert wird.</font>
    "SC" : "", <font color="green">Modelleisenbahn-Maßstab, aus den Einstellungen oder TrainPlayer.</font>
    "LN" : "", <font color="green">Layout-Name, aus Einstellungen oder TrainPlayer.</font>
    "BD" : "", <font color="blue">Bildungsdatum von TrainPlayer.</font>
  },
</pre>

<h2>Track Pattern Subroutine</h2>
<h3>Einführung</h3>
<p>Das Unterprogramm "Track Pattern" kann Pattern-Berichte für Tracks an einem einzigen Ort erstellen.
  Außerdem können die Fahrzeuge innerhalb eines Ortes von einem Gleis zum anderen bewegt werden.
  Wird ein Wagen auf eine Stichstrecke verschoben, kann optional der Fahrplan für diese Stichstrecke angewendet werden.</p>

<h3>Unterprogramm-Panel</h3>
<p>OperationsPatternScripts.PatternTracksSubroutine.Controller.makeSubroutinePanel()</p>
<img src="Pattern_Scripts_Subroutine.png" alt="<Pattern Scripts Subroutine Image>">

<h3>Musterbericht für Trackfenster</h3>
<p>OperationsPatternScripts.ControllerSetCarsForm.CreatePatternReportGui.makeFrame()</p>
<img src="Pattern_Report_For_Track.png" alt="<Pattern Report for Track Window Image>">

<h3>Track Pattern und Switch List JSON-Format</h3>
<p>Die Musterberichte und TrainPlayer©-Exporte beginnen alle mit der Erstellung einer JSON-Datei.
Die Datei wird von diesem Plugin erstellt und im Falle von TrainPlayer©-Manifestexporten wird das JSON durch Modifizierung des von JMRI generierten Manifest-JSON erstellt.
Alle JSON-Dateien werden in den Ordner jsonManifests geschrieben und folgen dem abgebildeten Format:</p>
<img src="Report_File_Format.png" alt="<JSON format for reports>">

<h4>Track Pattern Subroutine Einstellungen in PatternConfig.json</h4>
<pre>
  "PT" : { <font color="blue">Pattern Tracks</font>
    "AD" : [ <font color="blue">Alle Abteilungen (geschrieben von diesem Plugin)</font>
    ],
    "AL" : [ <font color="blue">Alle Orte (von diesem Plugin geschrieben)</font>
    ],
    "PL" : "", <font color="blue">Pattern Location (von diesem Plugin geschrieben)</font>
    "PT" : { <font color="blue">Pattern-Tracks (geschrieben von diesem Plugin)</font>
    },
    "PA" : false, <font color="blue">Flagge "Nur Yard Tracks" (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "PI" : false, <font color="blue">Track Length Flag ignorieren (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "AS" : true, <font color="blue">Flag "Zeitplan" anwenden (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "TI" : false, <font color="blue">TrainPlayer Include flag (vom Benutzer gesetzt, von diesem Plugin geschrieben)</font>
    "PW" : 260, <font color="blue">Musterbreite</font>
    "PH" : 16, <font color="blue">Musterhöhe</font>
    "RM": 8, <font color="blue">Reihenmultiplikator</font>

  "RM" : { <font color="blue">Modifikatoren für Berichte</font></h4>
    "DS" : "<font color="green">*No Waybill</font>", <font color="blue">Bestimmungskennzeichen</font>
    "DT" : "<font color="green">*Not Consigned</font>", <font color="blue">Ziel Gleisbezeichner</font>
    "FD" : "<font color="green">*Via Staging</font>", <font color="blue">Endzielbezeichnung</font>
    "FT" : "<font color="green">*Any Line</font>", <font color="blue">Endziel Gleisbezeichner</font>
    "SL": [ <font color="blue">Lokomotiven sortieren</font>
      "<font color="green">Model</font>"
    ],
    "SC": [ <font color="blue">Autos sortieren</font>
      "<font color="green">Load Type</font>",
      "<font color="green">FD&Track</font>"
    ],
    "AW": { <font color="blue">Attribut Breite</font>
      "Input": <font color="green">6</font>,
      "Model": <font color="green">5</font>,
      "Road" : <font color="green">5</font>,
      "Number" : <font color="green">7</font>,
      "Type" : <font color="green">6</font>,
      "Length" : <font color="green">7</font>,
      "Weight" : <font color="green">7</font>,
      "Load" : <font color="green">6</font>,
      "Load Type" : <font color="green">5</font>,
      "Loco Type" : <font color="green">18</font>,
      "Owner" : <font color="green">20</font>,
      "Consist" : <font color="green">8</font>,
      "Hazardous" : <font color="green">10</font>,
      "Color" : <font color="green">6</font>,
      "Kernel" : <font color="green">7</font>,
      "Kernel Size" : <font color="green">12</font>,
      "Owner" : <font color="green">6</font>,
      "Track" : <font color="green">6</font>,
      "Location" : <font color="green">9</font>,
      "Destination" : <font color="green">15</font>,
      "Dest&Track" : <font color="green">30</font>,
      "Final Dest" : <font color="green">11</font>,
      "FD&Track" : <font color="green">21</font>,
      "Comment" : <font color="green">15</font>,
      "SetOut Msg" : <font color="green">12</font>,
      "PickUp Msg" : <font color="green">12</font>,
      "RWE" : <font color="green">10</font>,
      " " : 0
    }
  },
</pre>
<h2>o2o Unterprogramm, ops 2 ops</h2>
<h3>Einführung</h3>
<p>Die Unterroutine ops to ops (o2o) ist eine Gruppe von Hilfsprogrammen, die JMRI Operations Pro als Operations-Engine für TrainPlayer© dienen.
Die Idee ist, die Möglichkeiten der TrainPlayer©-Funktion Advanced Ops um die Flexibilität von Operations Pro zu erweitern,
und gleichzeitig die mühsame Synchronisierung von zwei Datenbanken zu vermeiden.</p>

<h3>Wer macht was</h3>
<p>Die folgende Tabelle zeigt, welches Programm welche Elemente verwaltet.</p>
<img src="Who_Does_What.png" alt="<Who Does What Image>">

<h3>Unterprogramm-Panel</h3>
<p>OperationsPatternScripts.PatternTracksSubroutine.Controller.makeSubroutinePanel()</p>
<img src="o2o_Subroutine.png" alt="<o2o Subroutine Image>">

<h4>o2o Einstellungen der Unterroutine in PatternConfig.json</h4>
<pre>
  "RD" :{  <font color="blue">Eisenbahndetails, optionaler Teil des TrainPlayer-Layouts.</font>
    "RR" : "", <font color="blue">Muttergesellschaft, d. h. die Bahn, der die Gleise gehören.</font>
    "OP" : "", <font color="blue">Name of the particular operation being modeled.</font>
    "LO" : "", <font color="blue">Standort des Prototyps.</font>
    "YR" : "", <font color="blue">Kalenderjahr, das modelliert wird.</font>
    "DV" : [], <font color="blue">Liste der Eisenbahnabteilungen für diese Anlage, kommagetrennt.</font>
    "SC" : "" <font color="blue">Modelleisenbahn-Maßstab.</font>
  },
  "o2o" : {
    "PC": [  <font color="blue">Liste der TrainPlayer-Wagencodes für Personenwagen.</font>
      "B",
      "BE",
      "BH",
      "BM",
      "BMR",
      "BMT",
      "BP",
      "BR",
      "BX",
      "CA",
      "CS",
      "D",
      "DA",
      "DB",
      "DC",
      "DL",
      "DO",
      "DP",
      "DPA",
      "MA",
      "MB",
      "MR",
      "P",
      "PA",
      "PAS",
      "PB",
      "PBC",
      "PBO",
      "PC",
      "PL",
      "PO",
      "PS",
      "PSA"
    ],
    "CC" : [  <font color="blue">Liste der TrainPlayer-Waggoncodes.</font>
      "N",
      "NM",
      "NE"
    ],
    "CFL" : [  <font color="blue">Core File List</font>
      "OperationsCarRoster",
      "OperationsEngineRoster",
      "OperationsLocationRoster"
    ],
    "SR" : {  <font color="blue">Scale Rubric</font> JMRI Modelleisenbahn Maßstab.
      "Z" : 1,
      "N" : 2,
      "TT" : 3,
      "HOn3" : 4,
      "OO" : 5,
      "HO" : 6,
      "Sn3" : 7,
      "S" : 8,
      "On3" : 9,
      "O" : 10,
      "G" : 11
    },
    "RF" : { <font color="blue">Report Files</font> Namen der TrainPlayer-Layout-Exportdateien.
      "TRL" : <font color="blue">"TrainPlayer Report - Locations.txt"</font>,
      "TRI" : <font color="blue">"TrainPlayer Report - Industries.txt"</font>,
      "TRR" : <font color="blue">"TrainPlayer Report - Rolling Stock.txt"</font>
    },

    "TR" : {  <font color="blue">Type Rubric</font> TrainPlayer- und JMRI-Gleisarten angleichen.
      "industry": "Spur",
      "interchange": "Interchange",
      "staging": "Staging",
      "class yard": "Yard",
      "XO reserved": "Spur"
    }
</pre>

</body>

</html>
