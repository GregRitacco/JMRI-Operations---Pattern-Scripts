<h1>Help Page - Pattern Scripts plugin for JMRI</h1>
<p>The Pattern Scripts plugin for JMRI is a suite of subroutines for JMRI Operations Pro. The use of this plugin is documented in the following list of YouTube videos. The videos are recorded in the English language.</p>
<h3>Pattern Scripts plugin - Video Documentation</h3>
<p><A HREF="https://youtu.be/vFeCn1d2YfI">An overview of this plugin</A></p>
<p><A HREF="https://youtu.be/Sl9yBQaRpeY">How to add this plugin to JMRI</A></p>
<p><A HREF="https://youtu.be/6G7xkRJTczo">How to translate this plugin</A></p>
<p><A HREF="https://youtu.be/GjPtXk3oKmc">How to set up this plugin</A></p>
<p><A HREF="https://youtu.be/DK6O9AQmqXo">How to modify this plugin</A></p>
<h3>Subroutines - Video Documentation</h3>
<p><A HREF="https://youtu.be/rlUfoSesnQo">The o2o subroutine - Use JMRI with TrainPlayerÂ© model railroad software</A></p>
<p>The Patterns subroutine - Overview</p>
<p><A HREF="https://youtu.be/2Tv6sUMDD_Y">The Patterns subroutine - Demonstration at industry</A></p>
<p><A HREF="https://youtu.be/IdXvxyo-E3Y">The Patterns subroutine - Demonstration at a yard</A></p>
<p><A HREF="https://youtu.be/5YleSgJGN9k">The Throwback subroutine - Run what-if scenarios with convenient return-to points</A></p>
<h2>Pattern Scripts plugin</h2>
<h3>Introduction</h3>
<p>The Pattern Scripts plugin can be thought of as a framework for hosting subroutines (or scripts) for JMRI Operations Pro that require a user interface. This plugin comes with four subroutines; jPlus, Patterns, o2o and Throwback. A template is also included to serve as scaffolding for someone wishing to add their own subroutine.</p>
<p>Subroutines may be added or removed individually as needed.</p>
<p>Additionally, each subroutine can be shown or hidden as needed, fron the Tools menu pulldown.</p>
<p>Each of the subroutines' features are only available when the plugin is running and the subroutine has been included. For example, extended railroad details will only appear in reports when the Pattern Scripts plugin has been started, and jPlus has been included. To deactivate the plugins features, close (not hide) the Pattern Scripts Swindow.</p>
<h3>Reporting</h3>
<p>This plugin can generate four types of reports:</p>
<p>1. Train List. When activated, building a train will generate an OPS train list, detailing the cars on train for each location along the train's route.</p>
<p>2. Work Order. When activated, a work order will be generated for a train when built. The WO details tasks scheduled for each location along the trains route.</p>
<p>3. Pattern Report. When using the Patterns subroutine, a pattern report for a location will detail inventory data for selected tracks.</p>
<p>4. Switch List. When using the Patterns subroutine, a switch list can be generated for any track. Switch crews would use these lists to perform their duties.</p>
<p>To activate or deactivate the train list and work order, select Tools - Extended Reports on or off.</p>
<p>Note: The train list and work order can be thought of as alternative interpretations of JMRI manifest and switch list, with the train list substituting for the manifest and the work order substituting for the JMRI switch list.
  Both reports are built from a JMRI created manifest json file.</P>
<h3>Formatting</h3>
<p>All the OPS reports are built from json files. The json created by this plugin follow the data structure of the JMRI manifest json.</p>
<p>To the extent possible, the CSV generated by this plugin follows JMRI CSV formatting.</p>
<h3>Organization</h3>
<p>The following chart shows the code structure of this plugin.</P>
<img src="./img/Code_Structure.png" alt="<Code Structure Image>">
<h3>Plugin Layout</h3>
<p>OperationsPatternScripts.MainScript.View.makePatternScriptsWindow()</p>
<img src="./img/Plugin_Layout.png" alt="<Plugin Layout Image>">
<h3>configFile.json</h3>
<p>Each JMRI profile gets its own configuration file, which is named configFile.json. It is found in the operations folder, and is used to provide custom settings for each profile and record user inputs.</p>
<p>Select Tools/Edit Config File. The values that are user editable are in subsections labeled "US" for User Settings. Other values should not be edited. If a mistake is made editing the configFile, the plugin will delete the file and provide a new one to start over using default values. Worst case, the plugin may crash. If that should happed select Tools/Restart From Default.</p>
<h4>User Settings for the Main Script section of configFile.json</h4>
<pre>
  The following are user editable values for the plugin.
  For colors, any of the A, B, G, R values can be changed, between 0 and 255.
  Also, new colors may be added.

  "US" : {
    "OPR" : "pattern report ({}).{}", <font color="DarkRed">OPS Pattern Report file name.</font>
    "OSL" : "switch list ({}).{}", <font color="DarkRed">OPS Switch List file name.</font>
    "OTL" : "train list ({}).{}", <font color="DarkRed">OPS Train List file name.</font>
    "OWO" : "work order ({}).{}", <font color="DarkRed">OPS Work Order file name.</font>
    "HCP" : " [ ] Hold", <font color="DarkRed">Hold car prefix.</font>
    "AW": { <font color="DarkRed">Attribute Width. In any OPS report, the number of characters alloted to each attribute.</font>
      " ": 1, 
      "Color": 6, 
      "Comment": 15, 
      "Consist": 8, 
      "DCC_Address": 10, 
      "Destination": 15, 
      "Dest&Track": 27, 
      "FD&Track": 23, 
      "Division": 15, 
      "Final_Dest": 11, 
      "Hazardous": 10, 
      "Kernel": 7, 
      "Kernel_Size": 3, 
      "Length": 3, 
      "Load": 12, 
      "Load_Type": 1, 
      "Location": 9, 
      "Number": 5, 
      "Model": 5, 
      "Owner": 20, 
      "PickUp_Msg": 12, 
      "RWE": 10, 
      "RWL": 10, 
      "Road": 4, 
      "SetOut_Msg": 12, 
      "Track": 12, 
      "Type": 3, 
      "Weight": 7
      },
      "OC" : true, <font color="DarkRed">Open Console. Opens the system console when the plugin starts.</font>
      "OT" : false, <font color="DarkRed">Open Trains window when plugin starts. (Not being used)</font>
    "CD": { <font color="DarkRed">Color Definitions, a set of predefined colors.</font>
        "BLANCH": { <font color="DarkRed">The name of the color.</font>
          "A": 210, <font color="DarkRed">The alpha (transparency) value.</font>
          "B": 255, <font color="DarkRed">The blue component value.</font>
          "D": "Lighten a bit", <font color="DarkRed">A description of the color.</font>
          "G": 255, <font color="DarkRed">The green component value.</font>
          "R": 255 <font color="DarkRed">The red component value.</font>
        },
        "GLOOM": {
          "A": 10,
          "B": 0,
          "D": "Darken a bit",
          "G": 0,
          "R": 0
        },
        "DUST": {
          "A": 255,
          "B": 218,
          "D": "Light tan",
          "G": 242,
          "R": 252
        },
        "FADED": {
          "A": 255,
          "B": 245,
          "D": "Light purple",
          "G": 225,
          "R": 237
        },
        "LICHEN": {
          "A": 255,
          "B": 244,
          "D": "Light green",
          "G": 255,
          "R": 236
        },
        "PALE": {
          "A": 255,
          "B": 250,
          "D": "Light blue",
          "G": 243,
          "R": 237
        },
        "RASH": {
          "A": 255,
          "B": 224,
          "D": "Light red",
          "G": 208,
          "R": 240
        },
        "colorA" : "DUST", <font color="DarkRed">The name of the color to be used when colorA is called.</font>
        "colorB" : "FADED", <font color="DarkRed">The name of the color to be used when colorB is called.</font>
        "colorC" : "RASH" <font color="DarkRed">The name of the color to be used when colorC is called.</font>
      }
    },
</pre>
