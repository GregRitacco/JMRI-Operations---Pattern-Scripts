<!DOCTYPE html>
<html lang="fr">
<head>
<title>Pattern Scripts Help</title>
<meta charset="utf-8">
<meta name="AUTHOR" content="Greg Ritacco">
<meta name="PROJECT" content="Pattern scripts for JMRI">
<meta name="VERSION" content="2.0.0">
<style>
  html * {
    font-family: verdana;
  }
  h1 {
    margin-left: 10px;
  }
  h2 {
    margin-left: 10px;
  }
  h3 {
    margin-left: 20px;
  }
  h4 {
    margin-left: 30px;
  }
  p {
    margin-left: 30px;
  }
  img {
    margin-left: 30px;
  }
  pre {
    margin-left: 30px;
  }
</style>
</head>
<body>
<h1>Page d'aide - Plugin Pattern Scripts pour JMRI</h1>
<p>Le plugin Pattern Scripts pour JMRI est une suite de sous-programmes pour JMRI Operations Pro. L'utilisation de ce plugin est documentée dans la liste suivante de vidéos YouTube. Les vidéos sont enregistrées en anglais.</p>
<h3>Plugin Pattern Scripts - Documentation vidéo</h3>
<p><A HREF="https://youtu.be/vFeCn1d2YfI">Une vue d'ensemble de ce plugin</A></p>
<p><A HREF="https://youtu.be/Sl9yBQaRpeY">Comment ajouter ce plugin à JMRI</A></p>
<p><A HREF="https://youtu.be/6G7xkRJTczo">Comment traduire ce plugin</A></p>
<p><A HREF="https://youtu.be/GjPtXk3oKmc">Comment installer ce plugin</A></p>
<p><A HREF="https://youtu.be/DK6O9AQmqXo">Comment modifier ce plugin</A></p>
<h3>Sous-programmes - Documentation vidéo</h3>
<p><A HREF="https://youtu.be/rlUfoSesnQo">Le sous-programme o2o - Utiliser JMRI avec le logiciel de modélisme ferroviaire TrainPlayer©</A></p>
<p>Le sous-programme Patterns - Vue d'ensemble</p>
<p><A HREF="https://youtu.be/2Tv6sUMDD_Y">La sous-routine Patterns - Démonstration dans l'industrie</A></p>
<p><A HREF="https://youtu.be/IdXvxyo-E3Y">Le sous-programme Patterns - Démonstration dans un chantier naval</A></p>
<p><A HREF="https://youtu.be/5YleSgJGN9k">Le sous-programme Throwback - Exécuter des scénarios de simulation avec des points de retour pratiques</A></p>
<h2>Plugin Pattern Scripts</h2>
<h3>Introduction</h3>
<p>Le plugin Pattern Scripts peut être considéré comme un cadre pour l'hébergement de sous-programmes (ou scripts) pour JMRI Operations Pro qui nécessitent une interface utilisateur. Ce plugin est livré avec quatre sous-programmes : jPlus, Patterns, o2o et Throwback. Un modèle est également inclus pour servir d'échafaudage à quelqu'un qui souhaite ajouter son propre sous-programme.</p>
<p>Des sous-programmes peuvent être ajoutés ou supprimés individuellement selon les besoins.</p>
<p>En outre, chaque sous-programme peut être affiché ou masqué selon les besoins, à partir du menu Outils.</p>
<p>Chacune des fonctions des sous-programmes n'est disponible que lorsque le plugin est en cours d'exécution et que le sous-programme a été inclus. Par exemple, les détails ferroviaires étendus n'apparaîtront dans les rapports que lorsque le plugin Pattern Scripts a été lancé et que jPlus a été inclus. Pour désactiver les fonctions des plugins, fermez (et non pas cachez) la fenêtre.</p>
<h3>Organisation</h3>
<p>Le tableau suivant montre la structure du code de ce plugin.</P>
<img src="./img/Code_Structure.png" alt="<Code Structure Image>">
<h3>Mise en page du plugin</h3>
<p>OperationsPatternScripts.MainScript.View.makePatternScriptsWindow()</p>
<img src="./img/Plugin_Layout.png" alt="<Plugin Layout Image>">
<h3>configFile.json</h3>
<p>Chaque profil JMRI dispose de son propre fichier de configuration, nommé configFile.json, qui se trouve dans le dossier operations et qui est utilisé pour fournir des paramètres personnalisés pour chaque profil et enregistrer les entrées de l'utilisateur.</p>
<p>Sélectionnez Outils/Modifier le fichier de configuration. Les valeurs modifiables par l'utilisateur se trouvent dans les sous-sections intitulées "US" pour User Settings. Les autres valeurs ne doivent pas être modifiées. Si une erreur est commise lors de la modification du fichier de configuration, le plugin supprimera le fichier et en fournira un nouveau pour recommencer en utilisant les valeurs par défaut. Dans le pire des cas, le plugin peut se planter. Si cela se produit, sélectionnez Outils/Redémarrer à partir de la valeur par défaut.</p>
<h4>Paramètres de l'utilisateur pour la section Main Script de configFile.json</h4>
<pre>
  The following are user editable values for the plugin.
  For colors, any of the A, B, G, R values can be changed, between 0 and 255.
  Also, new colors may be added.

  "US" : {
    "OC" : true, <font color="DarkRed">Open Console (Ouvrir la console) : ouvre la console du système au démarrage du plugin.</font>
    "CD": { <font color="DarkRed">Définitions de couleurs, un ensemble de couleurs prédéfinies.</font>
        "BLANCH": { <font color="DarkRed">Le nom de la couleur.</font>
          "A": 210, <font color="DarkRed">Valeur alpha (transparence).</font>
          "B": 255, <font color="DarkRed">La valeur de la composante bleue.</font>
          "D": "Lighten a bit", <font color="DarkRed">Une description de la couleur.</font>
          "G": 255, <font color="DarkRed">La valeur de la composante verte.</font>
          "R": 255 <font color="DarkRed">La valeur du composant rouge.</font>
        },
        "GLOOM": {
          "A": 10,
          "B": 0,
          "D": "Darken a bit",
          "G": 0,
          "R": 0
        },
        "DUST": {
          "A": 255,
          "B": 218,
          "D": "Light tan",
          "G": 242,
          "R": 252
        },
        "FADED": {
          "A": 255,
          "B": 245,
          "D": "Light purple",
          "G": 225,
          "R": 237
        },
        "LICHEN": {
          "A": 255,
          "B": 244,
          "D": "Light green",
          "G": 255,
          "R": 236
        },
        "PALE": {
          "A": 255,
          "B": 250,
          "D": "Light blue",
          "G": 243,
          "R": 237
        },
        "RASH": {
          "A": 255,
          "B": 224,
          "D": "Light red",
          "G": 208,
          "R": 240
        },
        "colorA" : "DUST", <font color="DarkRed">Le nom de la couleur à utiliser lorsque colorA est appelé.</font>
        "colorB" : "FADED", <font color="DarkRed">Le nom de la couleur à utiliser lorsque colorB est appelé.</font>
        "colorC" : "RASH" <font color="DarkRed">Le nom de la couleur à utiliser lorsque colorC est appelé.</font>
      }
    },
</pre>
<!-- jPlus help section html -->
<h2>Sous-programme jPlus</h2>
<h3>Description</h3>
<p>Le sous-programme jPlus ajoute des détails ferroviaires étendus aux rapports générés par ce plugin. Ces détails sont affichés dans l'en-tête des rapports de motifs et des listes de commutation. L'en-tête du serveur JMRI n'est pas modifié.</P>
  <h3>How To Use</h3>
<p>Pour utiliser ce sous-programme, saisissez les données appropriées dans la zone de texte et cliquez sur mettre à jour. Il n'est pas nécessaire de saisir tous les champs. Pour inclure les détails étendus dans un rapport Operations Pattern Scripts, cochez la case "Utiliser l'en-tête étendu". Les champs étendus sont les suivants :</P>
<h4>Nom du chemin de fer d'exploitation</h4>
<p>Il s'agit du chemin de fer qui possède ou exploite les voies modélisées. N'importe quel nom peut être saisi, tel que "PRR" ou "BN UPRR Joint" ou "G&D".</P>
<h4>Territoire opérationnel</h4>
<p>Il s'agit du nom du chemin de fer pour la partie modélisée, par exemple "Long Beach Intermodal Terminal" ou "Salem Glass Works Branch".</P>
<h4>Localisation</h4>
<p>Lieu où se trouve le chemin de fer, par exemple "The Great Divide" ou "The Bronx, New York".</P>
<h4>Année de commercialisation</h4>
<p>L'année sur laquelle le modèle de chemin de fer est basé, c'est un miroir de 'JMRI/OperationsPro/Settings/Year Modled'. L'un met à jour l'autre.</p>
<h3>Panneau des sous-programmes</h3>
<p>Sous-routines.jPlus.View.ManageGui</p>
<img src="../Subroutines/jPlus/img/j_Plus_Subroutine.png" alt="<jPlus Subroutine Image>">
<h4>Paramètres utilisateur pour la section jPlus de configFile.json</h4>
<pre>
  The jPlus section of the configuration file has no user editable settings.
</pre>
<!-- o2o help section html -->
<h2>o2o Sous-routine</h2>
<h3>Description</h3>
<p>La sous-routine ops to ops (o2o) est un groupe d'utilitaires conçus pour être la colle qui permet à JMRI Operations Pro d'être le moteur d'opérations pour TrainPlayer©. L'idée est d'étendre la capacité de la fonction Advanced Ops de TrainPlayer© pour inclure la flexibilité d'Operations Pro, tout en éliminant le fastidieux maintien de la synchronisation de deux bases de données.</p>
<p>o2o exporte automatiquement un train construit ou une liste d'aiguillage vers TrainPlayer lorsque la fenêtre des scripts de modèle est ouverte et que le sous-programme o2o est inclus. Pour désactiver l'exportation o2o, supprimez o2o de la fenêtre des scripts de modèle ou fermez (ne cachez pas) la fenêtre des scripts de modèle.</p>
<h3>Ce que font les boutons</h3>
<p>Avant d'appuyer sur l'un de ces boutons, exportez votre schéma de TrainPlayer. Les sous-routines QuickKeys pour TrainPlayer doivent être ajoutées à TrainPlayer avant que votre schéma de TrainPlayer puisse être exporté. Reportez-vous à la documentation sur les Quick Keys.</p>
<p><A HREF="https://github.com/gar-codespace/QuickKeys-for-TrainPlayer">La page des clés rapides sur GitHub</A></p>
<p>Initialiser le chemin de fer - En appuyant sur ce bouton, vous effacez tout JMRI existant afin qu'un nouveau chemin de fer JMRI puisse être construit à partir de l'exportation TrainPlayer. Les fichiers XML Routes et Trains sont sauvegardés, les autres sont initialisés.</p>
<p>Importer des emplacements - En appuyant sur ce bouton, vous créez un nouveau chemin de fer JMRI à partir de l'exportation de TrainPlayer. Si vous utilisez jPlus, les données étendues que vous avez saisies dans la mise en page de TrainPlayer seront ajoutées. De plus, lorsque des modifications sont apportées à l'onglet Emplacements de la fenêtre Opérations avancées de TrainPlayer, vous pouvez appuyer sur ce bouton pour mettre à jour votre mise en page.</p>
<p>Importer les industries - Appuyez sur ce bouton lorsque vous avez fait des changements dans l'onglet Industries des opérations avancées de TrainPlayers, cela mettra à jour vos embranchements. Tous les changements que vous avez faits à votre matériel roulant seront également mis à jour.</p>
<p>Importer des wagons - Appuyez sur ce bouton lorsque vous avez changé le matériel roulant de votre réseau.</p>
<h3>Qui fait quoi</h3>
<p>Le tableau ci-dessous indique quel programme gère quels éléments.</p>
<img src="../Subroutines/o2o/img/Who_Does_What.png" alt="<Who Does What Image>">
<h3>Panneau des sous-programmes</h3>
<p>Sous-routines.o2o.View.ManageGui</p>
<img src="../Subroutines/o2o/img/o2o_Subroutine.png" alt="<o2o Subroutine Image>">
<h4>Paramètres de l'utilisateur pour la section o2o de configFile.json</h4>
<pre>
  The o2o section of the configuration file has the following user editable settings.
  The following are TrainPlayer car code lists for types of equipment, based on default TrainPlayer values.
  Custom car codes added to TrainPlayer would also be added here.

  "US" : {
    "XE" : [ <font color="DarkRed">Liste des codes de voitures TrainPlayer pour les moteurs.</font>
      "E",
      "ES",
      "ED",
      "EE",
      "ET"
    ],
    "XP" : [ <font color="DarkRed">Liste des codes de voitures TrainPlayer pour les voitures de passagers.</font>
      "EP",
      "CA",
      "CS",
      "D",
      "DA",
      "DB",
      "DC",
      "DL",
      "DO",
      "DP",
      "DPA",
      "P",
      "PA",
      "PAS",
      "PB",
      "PBC",
      "PBO",
      "PC",
      "PL",
      "PO",
      "PS",
      "PSA"
    ],
    "XX" : [ <font color="DarkRed">Liste des codes de wagons TrainPlayer pour les wagons à bagages.</font>
      "B",
      "BE",
      "BH",
      "BM",
      "BMR",
      "BMT",
      "BP",
      "BR",
      "BX",
      "MA",
      "MB",
      "MR"
    ],
    "XC" : [ <font color="DarkRed">Liste des codes de voiture TrainPlayer pour les cabines.</font>
      "N",
      "NM",
      "NE"
    ],
    "XM" : [ <font color="DarkRed">Liste des codes de wagons TrainPlayer pour le matériel MOW.</font>
      "M",
      "MWB",
      "MWC",
      "MWD",
      "MWG",
      "MWF",
      "MWK",
      "MWR",
      "MWX"
    ]
  },
</pre>
<!-- Patterns help section html -->
<h2>Sous-routine sur les motifs</h2>
<h3>Description</h3>
<p>Le sous-programme Modèles permet de générer des rapports de modèles pour les voies d'une même localité. De plus, les wagons peuvent être déplacés d'une voie à l'autre à l'intérieur d'une même localité. En option, si un wagon est déplacé sur un embranchement, l'horaire de cet embranchement peut être appliqué.</p>
<h3>Ce que font les boutons</h3>
<p>Si vous utilisez des divisions, le menu déroulant Division affichera une liste de divisions. En sélectionnant une division, la liste des emplacements de cette division s'affichera dans le menu déroulant Emplacement.</p>
<p>Lorsqu'un lieu est sélectionné, une liste de cases à cocher s'affiche, une pour chaque piste du lieu sélectionné.</p>
<p>La liste des pistes peut être filtrée en activant ou désactivant la case à cocher "Pistes de triage uniquement".</p>
<p>Les pistes individuelles peuvent être sélectionnées en cliquant sur la case à cocher située à côté du nom de la piste.</p>
<p>Lorsque des pistes sont sélectionnées, le fait d'appuyer sur le bouton Interrogation des pistes permet d'afficher des informations sur l'inventaire des pistes sélectionnées. Ces informations sont imprimables.</p>
<p>Une fois les voies sélectionnées, le fait d'appuyer sur le bouton "Set Rolling Stock to Track" ouvre une liste de travail pour chaque voie sélectionnée.</p>
<p>Pour chaque fenêtre de la liste de travail, une rangée de boutons, un pour chaque piste de l'emplacement sélectionné, s'affichera. En appuyant sur l'un des boutons de piste, le nom de la piste sera chargé dans la mémoire.</p>
<p>Pour n'importe quelle ligne de matériel roulant dans le panneau Voitures à..., cliquer à l'intérieur de l'une des zones de texte collera le nom de la voie sélectionnée dans la zone.</p>
<p>En appuyant sur le bouton Liste de commutation, une liste de travail sera générée pour cette piste. Cette liste est imprimable. Si o2o est utilisé, une liste de travail TrainPlayer sera également générée.</p>
<p>En appuyant sur le bouton "Set Rolling Stock to Track", une fenêtre s'ouvre.</p>
<p>La fenêtre contextuelle ajoute l'option d'utiliser un horaire d'éperon et de modifier la capacité de la voie.</p>
<p>En appuyant sur le bouton "Set Cars", le matériel roulant de la liste de travail sera déplacé sur la voie sélectionnée, sous réserve des restrictions de type.</p>
<h3>Panneau des sous-programmes</h3>
<p>Sous-routines.Patterns.View.ManageGui</p>
<img src="../Subroutines/Patterns/img/Pattern_Scripts_Subroutine.png" alt="<Pattern Scripts Subroutine Image>">
<h3>Rapport sur les motifs pour la fenêtre de la voie</h3>
<p>Subroutines.Patterns.ControllerSetCarsForm.CreatePatternReportGui.makeFrame()</p>
<img src="../Subroutines/Patterns/img/Pattern_Report_For_Track.png" alt="<Pattern Report for Track Window Image>">
<h3>Format json pour le modèle de piste, la liste des aiguillages et les événements de travail</h3>
<p>Tous les rapports de motifs commencent par la création d'un fichier json. Ces fichiers sont créés par ce plugin et sont écrits dans le dossier jsonManifests. Ils suivent le format illustré :</p>
<img src="../Subroutines/Patterns/img/Report_File_Format.png" alt="<JSON format for reports>">
<p>En fonction de la tâche, l'un ou l'autre des fichiers json sera ensuite écrit dans un fichier texte Pattern Report ou Switchlist ou exporté vers TrainPlayer sous la forme d'un fichier WorkEvents csv.</p>
<h4>Paramètres utilisateur pour la section Patterns de configFile.json</h4>
<pre>
  The Patterns section of the configuration file has the following user editable settings.
  
  "US" : {
    "DS" : "Not Assigned", <font color="DarkRed">Indicateur de destination lorsque le champ est vide.</font>
    "DT" : "Not Scheduled", <font color="DarkRed">Indicateur de la voie de destination lorsque le champ est vide.</font>
    "FD" : "Unconsigned", <font color="DarkRed">Indicateur de destination finale lorsque le champ est vide.</font>
    "FT" : "No Waybill", <font color="DarkRed">Destination finale et indicatif de la voie lorsque le champ est vide.</font>
    "EH" : "Available", <font color="DarkRed">Manutention prolongée, indicatif de cas particulier pour le moteur, le passager et le fourgon de queue.</font>
    "SL": [ Sort Locomotives. <font color="DarkRed">Les listes de locomotives sont triées en fonction des champs saisis ici*.</font>
      "Model"
    ],
    "SC": [ Sort Cars. <font color="DarkRed">Les listes de voitures sont triées en fonction des champs saisis ici*.</font>
      "Load_Type",
      "FD&Track"
    ],
    "AW": { <font color="DarkRed">Largeur de l'attribut, IE dans un rapport, le champ Nombre dispose de 7 caractères.</font>
      " ": 1, 
      "Road": 5, 
      "Number": 7, 
      "Type": 6, 
      "Length": 7, 
      "Color": 6, 
      "Weight": 7,
      "Comment": 15, 
      "Division": 15, 
      "Location": 9, 
      "Track": 6, 
      "Destination": 15, 
      "Owner": 20, 
      "Model": 5, 
      "DCC_Address": 10, 
      "Consist": 8, 
      "Load_Type": 1, 
      "Load": 6, 
      "Hazardous": 10, 
      "Kernel": 7, 
      "Kernel_Size": 3, 
      "Dest&Track": 27, 
      "Final_Dest": 11, 
      "FD&Track": 23, 
      "SetOut_Msg": 12, 
      "PickUp_Msg": 12, 
      "RWE": 10, 
      "RWL": 10, 
      "onTrain": 0, 
      "puso": 6, 
      "setTo": 6
    }
}
<font color="DarkRed">* Note, for Sort Loco "SL" and Sort car "SC", select names from those listed in "AW".</font>
</pre>
<!-- Template help section html -->
<h2>Sous-routine de modèle</h2>
<h3>Introduction</h3>
<p>Expliquez à quel point ce sous-programme est extraordinaire.</P>
<h3>Panneau des sous-programmes</h3>
<p>Sous-routines.Template.View.ManageGui</p>
<img src="../Subroutines/Template/img/Template_Subroutine.png" alt="<Template Subroutine Image>">
<h4>Paramètres de l'utilisateur pour la section Template de configFile.json</h4>
<pre>
  Put any user editable settings here.
  
  "US" : {
        
  }
</pre>
<!-- Throwback help section html -->
<h2>Sous-routine Throwback</h2>
<h3>Description</h3>
<p>La sous-routine Throwback s'inspire de l'idée d'un logiciel de contrôle de version. Les modifications sont nommées et sauvegardées. Ce faisant, des instantanés des données des chemins de fer sont pris.</p>
<p>L'engagement sert alors de point de référence qui permet de réinitialiser n'importe quel ensemble de données de l'IRMJ.</p>
<p>Ce sous-programme n'interagit pas avec les fonctions d'enregistrement et de sauvegarde automatiques de JMRI, qui s'exécutent telles qu'elles ont été configurées.</p>
<h3>Ce que font les boutons</h3>
<p>Le nom de chaque livraison est saisi dans la zone de texte du cadre Total des livraisons. Saisissez le nom AVANT d'appuyer sur le bouton Ajouter une nouvelle livraison.</p>
<p>En appuyant sur le bouton Ajouter un nouvel engagement, vous ajoutez un nouvel engagement.</p>
<p>En appuyant sur le bouton Supprimer toutes les validations, vous pouvez choisir de confirmer ou d'annuler la validation. En appuyant sur le bouton Confirmer, vous effacez toutes les validations sauvegardées, soyez donc prudent !</p>
<p>Dans le panneau Actions, les boutons Précédent et Suivant facilitent le défilement de votre collection de commits. La liste est classée par date/heure de création.</p>
<p>Sélectionnez n'importe quelle combinaison d'ensembles de données à renvoyer en cliquant sur la case correspondante.</p>
<p>En appuyant sur la touche Throwback, les ensembles de données sélectionnés sont ramenés à l'engagement affiché.</p>
<h3>Mise en page du plugin</h3>
<p>Subroutines.Throwback.View.ManageGui()</p>
<img src="../Subroutines/Throwback/img/Throwbach_Subroutine.png" alt="<Plugin Layout Image>">
<h4>Paramètres utilisateur pour la section Throwback de configFile.json</h4>
<pre>
  The Throwback section of the configuration file has no user editable settings.
</pre>
<!-- Template help section html -->
<h2>Template Subroutine</h2>
<h3>Description</h3>
<p>Talk about how amazing this subroutine is.</P>
<h3>How to use this subroutine</h3>
<p>Describe this subroutines use.</p>
<h3>Subroutine Panel</h3>
<p>Subroutines.Template.View.ManageGui</p>
<img src="../Subroutines/Template/img/Template_Subroutine.png" alt="<Template Subroutine Image>">
<h4>User Settings for the Template section of configFile.json</h4>
<pre>
  Put any user editable settings here.
  
  "US" : {
        
  }
</pre>
<!-- Template help section html -->
<h2>Template Subroutine</h2>
<h3>Description</h3>
<p>Talk about how amazing this subroutine is.</P>
<h3>How to use this subroutine</h3>
<p>Describe this subroutines use.</p>
<h3>Subroutine Panel</h3>
<p>Subroutines.Template.View.ManageGui</p>
<img src="../Subroutines/Template/img/Template_Subroutine.png" alt="<Template Subroutine Image>">
<h4>User Settings for the Template section of configFile.json</h4>
<pre>
  Put any user editable settings here.
  
  "US" : {
        
  }
</pre>
<!-- Template help section html -->
<h2>Template Subroutine</h2>
<h3>Description</h3>
<p>Talk about how amazing this subroutine is.</P>
<h3>How to use this subroutine</h3>
<p>Describe this subroutines use.</p>
<h3>Subroutine Panel</h3>
<p>Subroutines.Template.View.ManageGui</p>
<img src="../Subroutines/Template/img/Template_Subroutine.png" alt="<Template Subroutine Image>">
<h4>User Settings for the Template section of configFile.json</h4>
<pre>
  Put any user editable settings here.
  
  "US" : {
        
  }
</pre>
