<!DOCTYPE html>
<html lang="en-US">
<head>
<title>Pattern Scripts Help</title>
<meta charset="utf-8">
<meta name="AUTHOR" content="Greg Ritacco">
<meta name="PROJECT" content="Pattern scripts for JMRI">
<meta name="VERSION" content="2.0.0">
<style>
  html * {
    font-family: verdana;
  }
  h1 {
    margin-left: 10px;
  }
  h2 {
    margin-left: 10px;
  }
  h3 {
    margin-left: 20px;
  }
  h4 {
    margin-left: 30px;
  }
  p {
    margin-left: 30px;
  }
  img {
    margin-left: 30px;
  }
  pre {
    margin-left: 30px;
  }
</style>
</head>

<body>

<h1>Pagina di aiuto - Plugin Pattern Scripts per JMRI</h1>
<p>Il plugin Pattern Scripts per JMRI è una suite di subroutine per JMRI Operations Pro.
L'uso di questo plugin è documentato nel seguente elenco di video.
The videos are recorded in the English language.</p>

<h3>Plugin Scripts - Documentazione video</h3>

<p>Panoramica di questo plugin</p>
<p><A HREF="https://youtu.be/Sl9yBQaRpeY">Come aggiungere questo plugin a JMRI</A></p>
<p><A HREF="https://youtu.be/6G7xkRJTczo">Come tradurre questo plugin</A></p>
<p><A HREF="https://youtu.be/GjPtXk3oKmc">Come configurare questo plugin</A></p>
<p><A HREF="https://youtu.be/DK6O9AQmqXo">Come modificare questo plugin</A></p>
<h3>Subroutine - Documentazione video</h3>
<p>La subroutine j Plus</A></p>
<p><A HREF="https://youtu.be/IdXvxyo-E3Y">Subroutine modello di traccia - Dimostrazione in un cantiere</A></p>
<p><A HREF="https://youtu.be/2Tv6sUMDD_Y">Subroutine modello di traccia - Dimostrazione all'industria</A></p>
<p><A HREF="https://youtu.be/rlUfoSesnQo">o2o, la subroutine da ops a ops per TrainPlayer©</A></p>

<h2>Pattern Scripts plugin</h2>
<h3>Introduzione</h3>
<p>Il plugin Pattern Scripts può essere considerato come una struttura per ospitare le subroutine di JMRI Operations Pro che richiedono un'interfaccia utente.
Questo plugin è dotato di tre subroutine: j Plus, Pattern Tracks e o2o.
È incluso anche un modello che funge da impalcatura per chi desidera aggiungere una propria subroutine.
Sebbene le subroutine siano in qualche modo interdipendenti, possono essere attivate o disattivate singolarmente a seconda delle necessità.</p>

<h3>Organizzazione</h3>
<p>Il grafico seguente mostra la struttura del codice di questo plugin.</P>
<img src="Code_Structure.png" alt="<Code Structure Image>">

<h3>Plugin Layout</h3>
<p>OperationsPatternScripts.MainScript.View.makePatternScriptsWindow()</p>
<img src="Plugin_Layout.png" alt="<Plugin Layout Image>">

<h3>PatternConfig.json</h3>
<p>Ogni profilo JMRI riceve il proprio file di configurazione, chiamato PatternConfig.json.
Si trova nella cartella delle operazioni e serve a fornire impostazioni personalizzate per ciascun profilo e a registrare gli input dell'utente.
<br><font color="blue">La descrizione di ogni elemento è in blu</font>
<br><font color="green">I tasti modificabili dall'utente sono descritti in verde.</font>
<br>Select Tools/Edit Config File.
If a mistake is made editing the PatternConfig.json file, the plugin will delete the file and provide a new one to start over with.
Worst case the plugin may crash. If </p>

<h4>Impostazioni del plugin Pattern Scripts in PatternConfig.json</h4>
<pre>
  "CP" : { <font color="blue">Pannello di controllo</font>
    "TS" : { <font color="blue">Servizi di traduzione</font>
      "UD" : "UseDeepL",
      "UX" : "UseSomethingElse"
    },
    "TC" : "UD", <font color="blue">Scelta di traduzione</font>
    "LN" : "", <font color="blue">Nome del layout dalle impostazioni JMRI</font>
    "DR" : true, <font color="blue">Riservato</font>
    "AP" : true, <font color="blue">Aggiungi un pulsante alla cornice di Panel Pro, il plugin non viene visualizzato ma è comunque abilitato</font>
    "SE" : "utf-8", <font color="blue">Codifica predefinita</font>
    "IL" : [ <font color="blue">Lista di inclusione, le subroutine sono incluse in quest'ordine</font>
      "jPlusSubroutine",
      "PatternTracksSubroutine",
      "o2oSubroutine"
    ],
    "jPlusSubroutine" : false, <font color="blue">Stato di attivazione</font>
    "PatternTracksSubroutine" : true, <font color="blue">Stato di attivazione</font>
    "o2oSubroutine" : false, <font color="blue">Stato di attivazione</font>
    "PH" : 280, <font color="blue">Altezza predefinita del pannello</font>
    "PW" : 1100, <font color="blue">Larghezza predefinita del pannello</font>
    "PX" : 0, <font color="blue">Posizione del plugin, asse X</font>
    "PY" : 0, <font color="blue">Posizione del plugin, asse Y</font>
    "OC" : true, <font color="green">Apertura della finestra della console di sistema all'avvio del plugin</font>
    "RV" : 20221122 <font color="blue">Controllo della revisione</font>
  },
  "CD": { <font color="blue">Definizioni di colore</font>
    "CP": { <font color="blue">Paletta dei colori</font>
      "<font color="green">BLANCH</font>": { <font color="blue">Tutti questi colori possono essere modificati</font>
        "A": <font color="green">255</font>, <font color="blue">Valore alfa</font>
        "B": <font color="green">225</font>, <font color="blue">Valore blu</font>
        "D": <font color="green">Light grey</font>, <font color="blue">Descrizione vaga</font>
        "G": <font color="green">225</font>, <font color="blue">Valore verde</font>
        "R": <font color="green">225</font> <font color="blue">Valore rosso</font>
      },
      "DUST": {
        "A": 255,
        "B": 218,
        "D": "Light tan",
        "G": 242,
        "R": 252
      },
      "FADED": {
        "A": 255,
        "B": 245,
        "D": "Light purple",
        "G": 225,
        "R": 237
      },
      "LICHEN": {
        "A": 255,
        "B": 244,
        "D": "Light green",
        "G": 255,
        "R": 236
      },
      "PALE": {
        "A": 255,
        "B": 250,
        "D": "Light blue",
        "G": 243,
        "R": 237
      },
      "PETAL": {
        "A": 255,
        "B": 224,
        "D": "Light red",
        "G": 208,
        "R": 240
      },
    "locoColor": <font color="green">"FADED"</font> Non specificare alcun colore con "".
    "carColor": <font color="green">"DUST"</font>,
    "alertColor": <font color="green">"PETAL"</font>
  },
  "TO" : { <font color="blue">Operazioni settimanali, regolazioni delle impostazioni operative</font>
    "SME" : <font color="green">true</font>,  setMainMenuEnabled
    "CWS" : <font color="green">true</font>,  setCloseWindowOnSaveEnabled
    "SBA" : <font color="green">true</font>,  setBuildAggressive
    "SIA" : <font color="green">true</font>,  setStagingTrackImmediatelyAvail
    "SCT" : <font color="green">"ARR Codes"</font>,  setCarTypes
    "TNB" : <font color="green">true</font>,  setStagingTryNormalBuildEnabled
    "SME" : <font color="green">true</font>,  setManifestEditorEnabled
    "PUC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setPickupManifestMessageFormat
    "SOC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Destination"</font>,  setDropManifestMessageFormat
    "MC" : <font color="green">"Road", "Number", "Type", "Load Type", "Load", "Final Dest"</font>,  setLocalManifestMessageFormat
    "PUL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setPickupEngineMessageFormat
    "SOL" : <font color="green">"Road", "Number", "Model", "Consist", "Destination"</font>,  setDropEngineMessageFormat
    },
  "SM" : { <font color="blue">Staging modifiers</font>
    "SCL" : <font color="green">true</font>,  setAddCustomLoadsAnySpurEnabled
    "RCL" : <font color="green">true</font>,  setRemoveCustomLoadsEnabled
    "LEE" : <font color="green">true</font>,  setLoadEmptyEnabled
  },
</pre>

<h2>j Subroutine Plus</h2>
<h3>Introduzione</h3>
<p>La subroutine j Plus aggiunge dettagli ferroviari avanzati ai rapporti generati sia da JMRI che da questo plugin.</P>
<p>I dati per questa subroutine vengono inseriti nelle caselle di testo o, se la subroutine TrainPlayer è attivata, i dettagli ferroviari aggiuntivi vengono importati dal layout di TrainPlayer.</P>
<p>Non è necessario inserire tutti i campi.</P>
<p>I campi potenziati sono i seguenti:</P>
<h4>Nome della ferrovia operativa</h4>
<p>Può essere inserito qualsiasi nome, ad esempio "PRR" o "BN UPRR Joint" o "G&D".</P>
<h4>Territorio operativo</h4>
<p>Questo è il nome della ferrovia per la parte da modellare, ad esempio "Long Beach Intermodal Terminal" o "Salem Glass Works Branch".</P>
<h4>Localizzazione</h4>
<p>Dove si trova la ferrovia, ad esempio "The Great Divide" o "The Bronx, New York".</P>
<h4>Anno modellato</h4>
<p>Quale è l'anno su cui si basa il modello di ferrovia, questo è uno specchio di 'JMRI/OperationsPro/Settings/Year Modeled'.</p>

<h3>Pannello di subroutine</h3>
<p>OperationsPatternScripts.jPlusSubroutine.Controller.makeSubroutinePanel()</p>
<img src="j_Plus_Subroutine.png" alt="<j Plus Subroutine Image>">

<h4>j Subroutine Plus Settings in PatternConfig.json</h4>
<pre>
  "JP" :{  <font color="blue">j Plus Details.</font>
    "OR" : "", <font color="green">Ferrovia operativa, quella che possiede i binari.</font>
    "TR" : "", <font color="green">Nome della particolare operazione che si sta modellando.</font>
    "LO" : "", <font color="green">Sede del prototipo.</font>
    "YR" : "", <font color="green">L'anno solare oggetto della modellazione.</font>
    "SC" : "", <font color="green">Scala ferroviaria, dalle impostazioni o da TrainPlayer.</font>
    "LN" : "", <font color="green">Nome del layout, dalle impostazioni o da TrainPlayer.</font>
    "BD" : "", <font color="blue">Data di costruzione da TrainPlayer.</font>
  },
</pre>

<h2>Track Pattern Subroutine</h2>
<h3>Introduzione</h3>
<p>La subroutine Modello di traccia può generare rapporti di modello per le tracce in una singola posizione.
  Inoltre, le auto possono essere spostate da una pista all'altra all'interno di una località.
  Facoltativamente, se una macchina viene spostata su una derivazione, è possibile applicare la programmazione per quella derivazione.</p>

<h3>Pannello di subroutine</h3>
<p>OperationsPatternScripts.PatternTracksSubroutine.Controller.makeSubroutinePanel()</p>
<img src="Pattern_Scripts_Subroutine.png" alt="<Pattern Scripts Subroutine Image>">

<h3>Rapporto sui modelli per la finestra dei binari</h3>
<p>OperationsPatternScripts.ControllerSetCarsForm.CreatePatternReportGui.makeFrame()</p>
<img src="Pattern_Report_For_Track.png" alt="<Pattern Report for Track Window Image>">

<h3>Schema di traccia ed elenco di interruttori in formato JSON</h3>
<p>I rapporti sui modelli e le esportazioni di TrainPlayer© iniziano tutti con la creazione di un file JSON.
Il file viene creato da questo plugin e, nel caso delle esportazioni di manifest di TrainPlayer©, il JSON viene creato modificando il JSON del manifest generato da JMRI.
Tutti i file JSON vengono scritti nella cartella jsonManifest e seguono il formato illustrato:</p>
<img src="Report_File_Format.png" alt="<JSON format for reports>">

<h4>Impostazioni della subroutine del modello di tracciamento in PatternConfig.json</h4>
<pre>
  "PT" : { <font color="blue">Tracce del modello</font>
    "AD" : [ <font color="blue">Tutte le divisioni (scritte da questo plugin)</font>
    ],
    "AL" : [ <font color="blue">Tutte le posizioni (scritte da questo plugin)</font>
    ],
    "PL" : "", <font color="blue">Pattern Location (scritto da questo plugin)</font>
    "PT" : { <font color="blue">Pattern-Tracks (scritto da questo plugin)</font>
    },
    "PA" : false, <font color="blue">Bandiera Solo tracce di cantiere (impostata dall'utente, scritta da questo plugin)</font>
    "PI" : false, <font color="blue">Ignora il flag Lunghezza traccia (impostato dall'utente, scritto da questo plugin)</font>
    "AS" : true, <font color="blue">Applicare il flag Schedule (impostato dall'utente, scritto da questo plugin)</font>
    "TI" : false, <font color="blue">TrainPlayer Include flag (impostato dall'utente, scritto da questo plugin)</font>
    "PW" : 260, <font color="blue">Larghezza del modello</font>
    "PH" : 16, <font color="blue">Altezza del modello</font>
    "RM": 8, <font color="blue">Moltiplicatore di righe</font>

  "RM" : { <font color="blue">Modificatori di rapporto</font></h4>
    "DS" : "<font color="green">*No Waybill</font>", <font color="blue">Designatore di destinazione</font>
    "DT" : "<font color="green">*Not Consigned</font>", <font color="blue">Designatore del binario di destinazione</font>
    "FD" : "<font color="green">*Via Staging</font>", <font color="blue">Designatore di destinazione finale</font>
    "FT" : "<font color="green">*Any Line</font>", <font color="blue">Destinazione finale Indicatore di binario</font>
    "SL": [ <font color="blue">Ordinamento delle locomotive</font>
      "<font color="green">Model</font>"
    ],
    "SC": [ <font color="blue">Ordina le auto</font>
      "<font color="green">Load Type</font>",
      "<font color="green">FD&Track</font>"
    ],
    "AW": { <font color="blue">Larghezza dell'attributo</font>
      "Input": <font color="green">6</font>,
      "Model": <font color="green">5</font>,
      "Road" : <font color="green">5</font>,
      "Number" : <font color="green">7</font>,
      "Type" : <font color="green">6</font>,
      "Length" : <font color="green">7</font>,
      "Weight" : <font color="green">7</font>,
      "Load" : <font color="green">6</font>,
      "Load Type" : <font color="green">5</font>,
      "Loco Type" : <font color="green">18</font>,
      "Owner" : <font color="green">20</font>,
      "Consist" : <font color="green">8</font>,
      "Hazardous" : <font color="green">10</font>,
      "Color" : <font color="green">6</font>,
      "Kernel" : <font color="green">7</font>,
      "Kernel Size" : <font color="green">12</font>,
      "Owner" : <font color="green">6</font>,
      "Track" : <font color="green">6</font>,
      "Location" : <font color="green">9</font>,
      "Destination" : <font color="green">15</font>,
      "Dest&Track" : <font color="green">30</font>,
      "Final Dest" : <font color="green">11</font>,
      "FD&Track" : <font color="green">21</font>,
      "Comment" : <font color="green">15</font>,
      "SetOut Msg" : <font color="green">12</font>,
      "PickUp Msg" : <font color="green">12</font>,
      "RWE" : <font color="green">10</font>,
      " " : 0
    }
  },
</pre>
<h2>o2o Subroutine, ops 2 ops</h2>
<h3>Introduzione</h3>
<p>La subroutine ops to ops (o2o) è un gruppo di utility progettate per essere il collante che consente a JMRI Operations Pro di essere il motore operativo di TrainPlayer©.
L'idea è di espandere le capacità della funzione Advanced Ops di TrainPlayer© per includere la flessibilità di Operations Pro,
eliminando al contempo la noia di mantenere sincronizzati due database.</p>

<h3>Chi fa cosa</h3>
<p>La tabella seguente mostra quale programma gestisce quali elementi.</p>
<img src="Who_Does_What.png" alt="<Who Does What Image>">

<h3>Pannello di subroutine</h3>
<p>OperationsPatternScripts.PatternTracksSubroutine.Controller.makeSubroutinePanel()</p>
<img src="o2o_Subroutine.png" alt="<o2o Subroutine Image>">

<h4>o2o Impostazioni della subroutine in PatternConfig.json</h4>
<pre>
  "RD" :{  <font color="blue">Dettagli ferroviari, parte opzionale del layout di TrainPlayer.</font>
    "RR" : "", <font color="blue">Ferrovia madre, quella che possiede i binari.</font>
    "OP" : "", <font color="blue">Name of the particular operation being modeled.</font>
    "LO" : "", <font color="blue">Sede del prototipo.</font>
    "YR" : "", <font color="blue">L'anno solare oggetto della modellazione.</font>
    "DV" : [], <font color="blue">Elenco delle divisioni ferroviarie per questo layout, separate da virgole.</font>
    "SC" : "" <font color="blue">Scala ferroviaria di modellismo.</font>
  },
  "o2o" : {
    "PC": [  <font color="blue">Elenco dei codici macchina di TrainPlayer per le carrozze passeggeri.</font>
      "B",
      "BE",
      "BH",
      "BM",
      "BMR",
      "BMT",
      "BP",
      "BR",
      "BX",
      "CA",
      "CS",
      "D",
      "DA",
      "DB",
      "DC",
      "DL",
      "DO",
      "DP",
      "DPA",
      "MA",
      "MB",
      "MR",
      "P",
      "PA",
      "PAS",
      "PB",
      "PBC",
      "PBO",
      "PC",
      "PL",
      "PO",
      "PS",
      "PSA"
    ],
    "CC" : [  <font color="blue">Elenco dei codici dei vagoni di TrainPlayer.</font>
      "N",
      "NM",
      "NE"
    ],
    "CFL" : [  <font color="blue">Core File List</font>
      "OperationsCarRoster",
      "OperationsEngineRoster",
      "OperationsLocationRoster"
    ],
    "SR" : {  <font color="blue">Scale Rubric</font> Scala JMRI Model Railroad.
      "Z" : 1,
      "N" : 2,
      "TT" : 3,
      "HOn3" : 4,
      "OO" : 5,
      "HO" : 6,
      "Sn3" : 7,
      "S" : 8,
      "On3" : 9,
      "O" : 10,
      "G" : 11
    },
    "RF" : { <font color="blue">Report Files</font> Nomi dei file di esportazione dei layout di TrainPlayer.
      "TRL" : <font color="blue">"TrainPlayer Report - Locations.txt"</font>,
      "TRI" : <font color="blue">"TrainPlayer Report - Industries.txt"</font>,
      "TRR" : <font color="blue">"TrainPlayer Report - Rolling Stock.txt"</font>
    },

    "TR" : {  <font color="blue">Type Rubric</font> Allineare i tipi di binari di TrainPlayer e JMRI.
      "industry": "Spur",
      "interchange": "Interchange",
      "staging": "Staging",
      "class yard": "Yard",
      "XO reserved": "Spur"
    }
</pre>

</body>

</html>
